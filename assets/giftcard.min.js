!function(t,e,n){function i(){this.registered={},this.instances=[],this.extensions={"*":[]}}function o(){this.extensions.forEach(function(t){this.extend(t)}.bind(this))}t="default"in t?t.default:t,e="default"in e?e.default:e,n="default"in n?n.default:n,i.prototype={register:function(e,n,i){function s(n,i){this.name=e.toLowerCase(),this.container=n,this.$container=t(n),this.extensions=i,o.call(this)}s.classname=n,s.constructor=s,s.prototype=Object.create(o.prototype),t.extend(s.prototype,i),this.registered[e]=s},extend:function(t,e){"*"===t?(t=Object.keys(this.registered),t.push("*")):"string"==typeof t&&(t=[t]),t.forEach(function(t){this.extensions[t]=this.extensions[t]||[],this.extensions[t].push(e),void 0!==this.registered[t]&&"*"!==t&&this.instances.forEach(function(n){n.name===t&&n.extend(e)})}.bind(this))},load:function(t){"*"===t?t=Object.keys(this.registered):"string"==typeof t&&(t=[t]),t.forEach(this._loadTemplate.bind(this))},_loadTemplate:function(e){var i,o,s=this.registered[e],a=n(this.instances,{name:e});void 0===s||a||(i="*"===s.classname?document.body:document.querySelector("body."+s.classname))&&(o=this.extensions["*"].concat(this.extensions[e]||[]),a=new s(i,o),t.isFunction(a.onLoad)&&a.onLoad(i),this.instances.push(a))}},o.prototype={extend:function(n){var i=n.init;this.extensions.push(n),t.isFunction(i)&&(n=e(n,"init")),t.extend(this,n),i.apply(this)}};var s=new i,a={qrCode:"#QrCode",printButton:"#PrintGiftCard",giftCardCode:".giftcard__code"};s.register("Giftcard Template","template-giftcard",{onLoad:function(){var e=t(a.qrCode);new QRCode(e[0],{text:e.attr("data-identifier"),width:120,height:120}),t(a.printButton).on("click",function(){window.print()}),t(a.giftCardCode).on("click",{element:"GiftCardDigits"},this.selectText)},selectText:function(t){var e="",n=document.getElementById(t.data.element);if(document.body.createTextRange)e=document.body.createTextRange(),e.moveToElementText(n),e.select();else if(window.getSelection){var i=window.getSelection();e=document.createRange(),e.selectNodeContents(n),i.removeAllRanges(),i.addRange(e)}}}),t(document).ready(function(){s.load("*")})}(jQuery,_.omit,_.find);